{"ast":null,"code":"import _slicedToArray from \"/home/fuencode/Documents/WildCodeSchool/checkpoint/Wild_Circus_2.0/front/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/fuencode/Documents/WildCodeSchool/checkpoint/Wild_Circus_2.0/front/src/components/ChatPage.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport './ChatPage.css';\nimport Axios from 'axios';\nimport BgGlitch from './BgGlitch';\nimport { AuthContext } from './auth/Auth';\n\nconst ChatPage = () => {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        messages = _useState2[0],\n        setMessages = _useState2[1];\n\n  const _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        isSubmit = _useState4[0],\n        setIsSubmit = _useState4[1];\n\n  const _useState5 = useState(),\n        _useState6 = _slicedToArray(_useState5, 2),\n        hour = _useState6[0],\n        setHour = _useState6[1];\n\n  const _useState7 = useState(),\n        _useState8 = _slicedToArray(_useState7, 2),\n        date = _useState8[0],\n        setDate = _useState8[1];\n\n  const _useState9 = useState(),\n        _useState10 = _slicedToArray(_useState9, 2),\n        message = _useState10[0],\n        setMessage = _useState10[1];\n\n  const dataUser = React.useContext(AuthContext);\n  const pseudo = dataUser && dataUser.userInfo && dataUser.userInfo.pseudo;\n  useEffect(() => {\n    Axios.get('http://localhost:5000/api/chat').then(response => response.data).then(data => setMessages(data)); // refreshChat()\n\n    let wow = new Date();\n  }, []);\n\n  const refreshChat = () => {\n    Axios.get('http://localhost:5000/api/chat').then(response => response.data).then(data => setMessages(data));\n    setTimeout(refreshChat, 5000);\n  };\n\n  const postMessage = () => {\n    console.log(\"pseudo :\" + pseudo + \" data :\" + date + \" hour :\" + hour + \" message :\" + message);\n    setHour(heure + ':' + minute);\n    setDate(jour + '/' + mois + '/' + annee);\n    Axios.post('http://localhost:5000/api/chat', {\n      pseudo: pseudo,\n      date: date,\n      hour: hour,\n      message: message\n    }).then(setIsSubmit(true));\n  };\n\n  let annee = wow.getFullYear();\n  let mois = wow.getMonth() + 1;\n  let jour = wow.getDate();\n  let heure = wow.getHours();\n  let minute = wow.getMinutes();\n  return React.createElement(\"div\", {\n    className: \"ChatPage_container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"ChatPage_BgGlitch\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, React.createElement(BgGlitch, {\n    title: \"MADE BY FUENCORE\",\n    glitch: \"WILD_CHAT\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"ChatPage_read\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, messages.map(x => React.createElement(\"div\", {\n    className: \"ChatPage_read_container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"ChatPage_read_container_info\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"ChatPage_read_container_pseudo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, x.pseudo), React.createElement(\"p\", {\n    className: \"ChatPage_read_container_date\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, x.date, \" \\xE0 \", x.hour)), React.createElement(\"div\", {\n    className: \"ChatPage_read_container_message\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"ChatPage_read_message\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, x.message))))), React.createElement(\"div\", {\n    className: \"ChatPage_write\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(\"textarea\", {\n    type: \"text\",\n    className: \"ChatPage_textarea\",\n    onChange: e => setMessage(e.target.value),\n    onSubmit: () => postMessage(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    type: \"sumbit\",\n    className: \"ChatPage_sendbutton\",\n    onClick: () => postMessage(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  })));\n};\n\nexport default ChatPage;","map":{"version":3,"sources":["/home/fuencode/Documents/WildCodeSchool/checkpoint/Wild_Circus_2.0/front/src/components/ChatPage.jsx"],"names":["React","useState","useEffect","Axios","BgGlitch","AuthContext","ChatPage","messages","setMessages","isSubmit","setIsSubmit","hour","setHour","date","setDate","message","setMessage","dataUser","useContext","pseudo","userInfo","get","then","response","data","wow","Date","refreshChat","setTimeout","postMessage","console","log","heure","minute","jour","mois","annee","post","getFullYear","getMonth","getDate","getHours","getMinutes","map","x","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './ChatPage.css';\nimport Axios from 'axios';\nimport BgGlitch from './BgGlitch';\nimport { AuthContext } from './auth/Auth';\n\nconst ChatPage = () => {\n\tconst [ messages, setMessages ] = useState([]);\n\tconst [ isSubmit, setIsSubmit ] = useState(false);\n\tconst [ hour, setHour ] = useState();\n\tconst [ date, setDate ] = useState();\n\n\tconst [ message, setMessage ] = useState();\n\n\tconst dataUser = React.useContext(AuthContext);\n\n\tconst pseudo = (dataUser && dataUser.userInfo && dataUser.userInfo.pseudo);\n\n\tuseEffect(() => {\n        Axios.get('http://localhost:5000/api/chat').then((response) => response.data).then((data) => setMessages(data));\n        // refreshChat()\n        let wow = new Date();\n    \n    }, []);\n    \n    const refreshChat = () => {\n        Axios.get('http://localhost:5000/api/chat').then((response) => response.data).then((data) => setMessages(data));\n        setTimeout(refreshChat, 5000)\n    }\n\n\tconst postMessage = () => {\n\n        console.log(\"pseudo :\" + pseudo + \" data :\" + date + \" hour :\" + hour + \" message :\" + message)\n\t\tsetHour(heure + ':' + minute);\n\t\tsetDate(jour + '/' + mois + '/' + annee);\n\t\tAxios.post('http://localhost:5000/api/chat', {\n\t\t\tpseudo: pseudo,\n            date: date,\n            hour: hour,\n            message: message\n\t\t}).then(setIsSubmit(true));\n    };\n    \n    let annee = wow.getFullYear();\n    let mois = wow.getMonth() + 1;\n    let jour = wow.getDate();\n    let heure = wow.getHours();\n    let minute = wow.getMinutes();\n    \n\treturn (\n\t\t<div className=\"ChatPage_container\">\n\t\t\t<div className=\"ChatPage_BgGlitch\">\n\t\t\t\t<BgGlitch title=\"MADE BY FUENCORE\" glitch=\"WILD_CHAT\" />\n\t\t\t</div>\n\t\t\t<div className=\"ChatPage_read\">\n\t\t\t\t{messages.map((x) => (\n\t\t\t\t\t<div className=\"ChatPage_read_container\">\n\t\t\t\t\t\t<div className=\"ChatPage_read_container_info\">\n\t\t\t\t\t\t\t<p className=\"ChatPage_read_container_pseudo\">{x.pseudo}</p>\n\t\t\t\t\t\t\t<p className=\"ChatPage_read_container_date\">{x.date} Ã  {x.hour}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"ChatPage_read_container_message\">\n\t\t\t\t\t\t\t<p className=\"ChatPage_read_message\">{x.message}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t\t<div className=\"ChatPage_write\">\n\t\t\t\t<textarea type=\"text\" className=\"ChatPage_textarea\" onChange={(e) => setMessage(e.target.value)} onSubmit={() => postMessage()}/>\n\t\t\t\t<button type=\"sumbit\" className=\"ChatPage_sendbutton\" onClick={() => postMessage()}/>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default ChatPage;\n"]},"metadata":{},"sourceType":"module"}