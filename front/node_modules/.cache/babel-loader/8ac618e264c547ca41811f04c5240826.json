{"ast":null,"code":"import _slicedToArray from \"/home/fuencode/Documents/WildCodeSchool/checkpoint/Wild_Circus_2.0/front/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/fuencode/Documents/WildCodeSchool/checkpoint/Wild_Circus_2.0/front/src/components/auth/Login.jsx\";\nimport React, { useState } from 'react';\nimport { Redirect } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport { useAuth, AuthContext } from './Auth';\nimport BgGlitch from \"../BgGlitch\";\nimport './Login.css';\n\nconst Login = props => {\n  const userHook = React.useContext(AuthContext);\n\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        isLoggedIn = _useState2[0],\n        setIsLoggedIn = _useState2[1];\n\n  const _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        isError = _useState4[0],\n        setIsError = _useState4[1];\n\n  const _useState5 = useState(''),\n        _useState6 = _slicedToArray(_useState5, 2),\n        username = _useState6[0],\n        setUsername = _useState6[1];\n\n  const _useState7 = useState(''),\n        _useState8 = _slicedToArray(_useState7, 2),\n        pass = _useState8[0],\n        setPass = _useState8[1];\n\n  const _useAuth = useAuth(),\n        setAuthTokens = _useAuth.setAuthTokens;\n\n  const postLogin = () => {\n    axios.post(`http://localhost:5000/api/auth/login`, {\n      username,\n      pass\n    }).then(res => {\n      //  userHook.setAuthTokens(res.data.token);\n      setAuthTokens(res.data.token);\n      userHook.setUserInfo(res.data.user[0]);\n      setIsLoggedIn(true);\n    });\n  };\n\n  if (isLoggedIn) {\n    return React.createElement(Redirect, {\n      to: \"/Main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33\n      },\n      __self: this\n    });\n  }\n\n  return React.createElement(\"div\", {\n    className: \"Login_container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }, React.createElement(BgGlitch, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"Login_input_container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    className: \"Login_title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, \"Connecte-toi !\"), React.createElement(\"input\", {\n    name: \"username\",\n    className: \"Login_username\",\n    type: \"username\",\n    placeholder: \"Nom de compte\",\n    onChange: e => setUsername(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    name: \"password\",\n    className: \"Login_password\",\n    type: \"password\",\n    placeholder: \"Mot de passe\",\n    onChange: e => setPass(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"Login_container_button\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"Login_button\",\n    onClick: () => postLogin(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, \"Connexion\"), React.createElement(Link, {\n    to: \"/main\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"Login_button_skip\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, \"Passer\")))));\n};\n\nexport default Login;","map":{"version":3,"sources":["/home/fuencode/Documents/WildCodeSchool/checkpoint/Wild_Circus_2.0/front/src/components/auth/Login.jsx"],"names":["React","useState","Redirect","Link","axios","useAuth","AuthContext","BgGlitch","Login","props","userHook","useContext","isLoggedIn","setIsLoggedIn","isError","setIsError","username","setUsername","pass","setPass","setAuthTokens","postLogin","post","then","res","data","token","setUserInfo","user","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Redirect } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport { useAuth, AuthContext } from './Auth';\nimport BgGlitch from \"../BgGlitch\"\nimport './Login.css';\n\n\nconst Login = (props) => {\n  const userHook = React.useContext(AuthContext);\n\tconst [ isLoggedIn, setIsLoggedIn ] = useState(false);\n\tconst [ isError, setIsError ] = useState(false);\n\tconst [ username, setUsername ] = useState('');\n\tconst [ pass, setPass ] = useState('');\n\tconst { setAuthTokens } = useAuth();\n\tconst postLogin = () => {\n\t\taxios\n\t\t\t.post(`http://localhost:5000/api/auth/login`, {\n\t\t\t\tusername,\n\t\t\t\tpass\n\t\t\t})\n\t\t\t.then((res) => {\n\n\t\t//  userHook.setAuthTokens(res.data.token);\n\t\t setAuthTokens(res.data.token);\n\t\t userHook.setUserInfo(res.data.user[0])\n\t\tsetIsLoggedIn(true);\n      })\n  };\n  \n\tif (isLoggedIn) {\n\t\treturn <Redirect to=\"/Main\" />;\n\t}\n\t\n\treturn (\n\t\t<div className=\"Login_container\">\n\t\t\t<BgGlitch />\n\n\t\t\t<div className=\"Login_input_container\">\n\t\t\t\t<h3 className=\"Login_title\">Connecte-toi !</h3>\n\t\t\t\t<input\n\t\t\t\t\tname=\"username\"\n\t\t\t\t\tclassName=\"Login_username\"\n\t\t\t\t\ttype=\"username\"\n\t\t\t\t\tplaceholder=\"Nom de compte\"\n\t\t\t\t\tonChange={(e) => setUsername(e.target.value)}\n\t\t\t\t/>\n\t\t\t\t<input\n\t\t\t\t\tname=\"password\"\n\t\t\t\t\tclassName=\"Login_password\"\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tplaceholder=\"Mot de passe\"\n\t\t\t\t\tonChange={(e) => setPass(e.target.value)}\n\t\t\t\t/>\n\t\t\t\t<div className=\"Login_container_button\">\n\t\t\t\t<button className=\"Login_button\" onClick={() => postLogin()}>\n\t\t\t\t\tConnexion\n\t\t\t\t</button>\n\t\t\t\t<Link to=\"/main\"><button className=\"Login_button_skip\">\n\t\t\t\t\tPasser\n\t\t\t\t</button>\n\t\t\t\t</Link>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}