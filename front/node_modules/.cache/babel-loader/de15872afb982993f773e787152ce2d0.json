{"ast":null,"code":"import _slicedToArray from \"/home/fuencode/Documents/WildCodeSchool/checkpoint/Wild_Circus_2.0/front/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/fuencode/Documents/WildCodeSchool/checkpoint/Wild_Circus_2.0/front/src/components/adminPanel/AddHistory.jsx\";\nimport React, { useEffect, useState } from 'react';\nimport { AuthContext } from '../auth/Auth';\nimport './AddHistory.css';\nimport BgGlitch from '../BgGlitch';\nimport Axios from 'axios';\nimport { Redirect, Link } from \"react-router-dom\";\n\nconst AddHistory = () => {\n  const dataUser = React.useContext(AuthContext);\n\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        isSubmit = _useState2[0],\n        setIsSubmit = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        history = _useState4[0],\n        setHistory = _useState4[1];\n\n  const _useState5 = useState(),\n        _useState6 = _slicedToArray(_useState5, 2),\n        newPlace = _useState6[0],\n        setNewPlace = _useState6[1];\n\n  const _useState7 = useState(),\n        _useState8 = _slicedToArray(_useState7, 2),\n        newDate = _useState8[0],\n        setNewDate = _useState8[1];\n\n  const _useState9 = useState(),\n        _useState10 = _slicedToArray(_useState9, 2),\n        newImage = _useState10[0],\n        setNewImage = _useState10[1];\n\n  const _useState11 = useState(),\n        _useState12 = _slicedToArray(_useState11, 2),\n        newText = _useState12[0],\n        setNewText = _useState12[1];\n\n  const _useState13 = useState(null),\n        _useState14 = _slicedToArray(_useState13, 2),\n        needDelete = _useState14[0],\n        setNeedDelete = _useState14[1];\n\n  const submitPlace = () => {\n    Axios.post(`http://localhost:5000/api/exploit`, {\n      place: newPlace,\n      name: newName,\n      image: newImage\n    }).then(setIsSubmit(true));\n  };\n\n  const removePlace = () => {\n    Axios.delete(`http://localhost:5000/api/exploit/${needDelete}`).then(setIsSubmit(true));\n  };\n\n  useEffect(() => {\n    Axios.get('http://localhost:5000/api/exploit').then(res => res.data).then(data => setHistory(data));\n  }, []);\n\n  if (isSubmit) {\n    return React.createElement(Redirect, {\n      to: \"/Admin\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35\n      },\n      __self: this\n    });\n  }\n\n  if (needDelete != null) {\n    return removePlace();\n  }\n\n  return React.createElement(\"div\", {\n    className: \"AddHistory_container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"Login_BgGlitch\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, React.createElement(BgGlitch, {\n    title: \"MADE BY FUENCORE\",\n    glitch: \"WILD_CIRCUS\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  })), React.createElement(Link, {\n    to: \"/Admin\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    id: \"Return_button\",\n    type: \"submit\",\n    name: \"return\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, \"Retour\")), React.createElement(\"div\", {\n    className: \"AddHistory_box\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, React.createElement(\"ul\", {\n    className: \"AddHistory_ul\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, history.map(x => React.createElement(\"li\", {\n    className: \"AddHistory_li\",\n    key: x.id,\n    value: x.id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    id: \"AddHistory_button\",\n    type: \"submit\",\n    onClick: () => setNeedDelete(x.id),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, \"Remove\"), React.createElement(\"img\", {\n    className: \"AddHistory_img\",\n    src: x.image,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"AddHistory_info_container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"AddHistory_name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, x.name), React.createElement(\"p\", {\n    className: \"AddHistory_place\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, x.place))))), React.createElement(\"div\", {\n    className: \"AddHistory_box2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, React.createElement(\"li\", {\n    className: \"AddHistory_li\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"AddHistory_info_container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    className: \"AddHistory_name_1\",\n    placeholder: \"Entrer un lien d'image\",\n    onChange: e => setNewImage(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"number\",\n    className: \"AddHistory_name_1\",\n    placeholder: \"Entrer une ann\\xE9e\",\n    onChange: e => setNewDate(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"text\",\n    className: \"AddHistory_place_1\",\n    placeholder: \"Entrer un lieu\",\n    onChange: e => setNewPlace(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  })))), React.createElement(\"button\", {\n    className: \"AddHistory_submit_btn\",\n    type: \"submit\",\n    onClick: () => submitPlace(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, \"Enregistrer les modifications\")));\n};\n\nexport default AddHistory;","map":{"version":3,"sources":["/home/fuencode/Documents/WildCodeSchool/checkpoint/Wild_Circus_2.0/front/src/components/adminPanel/AddHistory.jsx"],"names":["React","useEffect","useState","AuthContext","BgGlitch","Axios","Redirect","Link","AddHistory","dataUser","useContext","isSubmit","setIsSubmit","history","setHistory","newPlace","setNewPlace","newDate","setNewDate","newImage","setNewImage","newText","setNewText","needDelete","setNeedDelete","submitPlace","post","place","name","newName","image","then","removePlace","delete","get","res","data","map","x","id","e","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { AuthContext } from '../auth/Auth';\nimport './AddHistory.css';\nimport BgGlitch from '../BgGlitch';\nimport Axios from 'axios';\nimport { Redirect, Link } from \"react-router-dom\";\n\nconst AddHistory = () => {\n\tconst dataUser = React.useContext(AuthContext);\n    const [ isSubmit, setIsSubmit ] = useState(false);\n    const [ history, setHistory ] = useState([]);\n    const [ newPlace, setNewPlace ] = useState()\n    const [ newDate, setNewDate ] = useState()\n    const [ newImage, setNewImage ] = useState();\n    const [ newText, setNewText ] = useState()\n    const [ needDelete, setNeedDelete ] = useState(null)\n    \n    const submitPlace = () => {\n\t\tAxios.post(`http://localhost:5000/api/exploit`, {\n            place: newPlace,\n            name: newName,\n            image: newImage\n\t\t}).then(setIsSubmit(true))\n\t};\n\n    const removePlace = () => {\n        Axios.delete(`http://localhost:5000/api/exploit/${needDelete}`).then(setIsSubmit(true))\n    }\n\tuseEffect(() => {\n\t\tAxios.get('http://localhost:5000/api/exploit').then((res) => res.data).then((data) => setHistory(data));\n\t}, []);\n\n\n\tif (isSubmit) {\n\t\treturn <Redirect to=\"/Admin\" />;\n    }\n    \n    if(needDelete != null) {\n        return removePlace();\n    }\n\n\treturn (\n\t\t<div className=\"AddHistory_container\">\n\t\t\t<div className=\"Login_BgGlitch\">\n\t\t\t\t<BgGlitch title=\"MADE BY FUENCORE\" glitch=\"WILD_CIRCUS\" />\n\t\t\t</div>\n            <Link to=\"/Admin\"><button id=\"Return_button\" type=\"submit\" name=\"return\">Retour</button></Link>\n\t\t\t<div className=\"AddHistory_box\">\n\t\t\t\t<ul className=\"AddHistory_ul\">\n\t\t\t\t\t{history.map((x) => (\n\t\t\t\t\t\t<li className=\"AddHistory_li\" key={x.id} value={x.id}>\n\t\t\t\t\t\t\t<button id=\"AddHistory_button\" type=\"submit\" onClick={() => setNeedDelete(x.id)}>\n\t\t\t\t\t\t\t\tRemove\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<img className=\"AddHistory_img\" src={x.image} />\n\t\t\t\t\t\t\t<div className=\"AddHistory_info_container\">\n\t\t\t\t\t\t\t\t<p className=\"AddHistory_name\" >\n\t\t\t\t\t\t\t\t\t{x.name}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p className=\"AddHistory_place\">\n\t\t\t\t\t\t\t\t\t{x.place}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t\t<div className=\"AddHistory_box2\">\n\t\t\t\t\t<li className=\"AddHistory_li\">\n\t\t\t\t\t\t<div className=\"AddHistory_info_container\">\n                        <input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclassName=\"AddHistory_name_1\"\n\t\t\t\t\t\t\t\tplaceholder=\"Entrer un lien d'image\"\n\t\t\t\t\t\t\t\tonChange={(e) => setNewImage(e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tclassName=\"AddHistory_name_1\"\n\t\t\t\t\t\t\t\tplaceholder=\"Entrer une annÃ©e\"\n\t\t\t\t\t\t\t\tonChange={(e) => setNewDate(e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclassName=\"AddHistory_place_1\"\n\t\t\t\t\t\t\t\tplaceholder=\"Entrer un lieu\"\n\t\t\t\t\t\t\t\tonChange={(e) => setNewPlace(e.target.value )}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t\t</div>\n\t\t\t\t<button className=\"AddHistory_submit_btn\" type=\"submit\" onClick={() => submitPlace()}>Enregistrer les modifications</button>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default AddHistory;\n"]},"metadata":{},"sourceType":"module"}