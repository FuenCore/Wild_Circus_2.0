{"ast":null,"code":"import _slicedToArray from \"/home/fuencode/Documents/WildCodeSchool/checkpoint/Wild_Circus_2.0/front/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/fuencode/Documents/WildCodeSchool/checkpoint/Wild_Circus_2.0/front/src/components/auth/Login.jsx\";\nimport React, { useState } from 'react';\nimport { Redirect } from 'react-router';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport { useAuth } from './Auth';\nimport './Login.css';\n\nconst Login = ({\n  dispatch\n}, props) => {\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        isLoggedIn = _useState2[0],\n        setIsLoggedIn = _useState2[1];\n\n  const _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        isError = _useState4[0],\n        setIsError = _useState4[1];\n\n  const _useState5 = useState(''),\n        _useState6 = _slicedToArray(_useState5, 2),\n        username = _useState6[0],\n        setUsername = _useState6[1];\n\n  const _useState7 = useState(''),\n        _useState8 = _slicedToArray(_useState7, 2),\n        password = _useState8[0],\n        setPassword = _useState8[1];\n\n  const _useAuth = useAuth(),\n        setAuthTokens = _useAuth.setAuthTokens;\n\n  const postLogin = () => {\n    axios.post(`${process.env.REACT_APP_AXIOS_URL}/api/auth/login`, {\n      email,\n      password\n    }).then(res => {\n      setAuthTokens(res.data.token);\n      setIsLoggedIn(true); //     dispatch({\n      //       type: 'GET_LICENCE',\n      //       payload: res.data.user[0].licence_nbr\n      //     });\n      //     dispatch({\n      //       type: 'GET_IS_ADMIN',\n      //       payload: res.data.user[0].is_admin\n      //     });\n      //     dispatch({\n      //       type: 'GET_IS_SUPER',\n      //       payload: res.data.user[0].is_super\n      //     });\n      //     setIsError(true);\n      //   })\n      //   .catch(e => {\n      //     setIsError(true);\n    });\n  };\n\n  if (isLoggedIn) {\n    return React.createElement(Redirect, {\n      to: \"/Home\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    });\n  }\n\n  return React.createElement(\"div\", {\n    className: \"Login_container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    name: \"username\",\n    className: \"Login_username\",\n    type: \"username\",\n    placeholder: \"Nom de compte\",\n    onChange: e => setUsername(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    name: \"password\",\n    className: \"Login_password\",\n    type: \"password\",\n    placeholder: \"Mot de passe\",\n    onChange: e => setPassword(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }));\n}; // }\n// const mapStateToProps = store => {\n//   return { url: store.todos.url };\n// };\n// export default connect(mapStateToProps, null)(Login);\n\n\nexport default Login;","map":{"version":3,"sources":["/home/fuencode/Documents/WildCodeSchool/checkpoint/Wild_Circus_2.0/front/src/components/auth/Login.jsx"],"names":["React","useState","Redirect","connect","axios","useAuth","Login","dispatch","props","isLoggedIn","setIsLoggedIn","isError","setIsError","username","setUsername","password","setPassword","setAuthTokens","postLogin","post","process","env","REACT_APP_AXIOS_URL","email","then","res","data","token","e","target","value"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,QAAxB;AACA,OAAO,aAAP;;AAEA,MAAMC,KAAK,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,EAAeC,KAAf,KAAyB;AAAA,oBACDP,QAAQ,CAAC,KAAD,CADP;AAAA;AAAA,QAC9BQ,UAD8B;AAAA,QAClBC,aADkB;;AAAA,qBAEPT,QAAQ,CAAC,KAAD,CAFD;AAAA;AAAA,QAE9BU,OAF8B;AAAA,QAErBC,UAFqB;;AAAA,qBAGLX,QAAQ,CAAC,EAAD,CAHH;AAAA;AAAA,QAG9BY,QAH8B;AAAA,QAGpBC,WAHoB;;AAAA,qBAILb,QAAQ,CAAC,EAAD,CAJH;AAAA;AAAA,QAI9Bc,QAJ8B;AAAA,QAIpBC,WAJoB;;AAAA,mBAKXX,OAAO,EALI;AAAA,QAK7BY,aAL6B,YAK7BA,aAL6B;;AAOrC,QAAMC,SAAS,GAAG,MAAM;AACtBd,IAAAA,KAAK,CACFe,IADH,CACS,GAAEC,OAAO,CAACC,GAAR,CAAYC,mBAAoB,iBAD3C,EAC6D;AACzDC,MAAAA,KADyD;AAEzDR,MAAAA;AAFyD,KAD7D,EAKGS,IALH,CAKQC,GAAG,IAAI;AACXR,MAAAA,aAAa,CAACQ,GAAG,CAACC,IAAJ,CAASC,KAAV,CAAb;AACAjB,MAAAA,aAAa,CAAC,IAAD,CAAb,CAFW,CAGf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACG,KAzBH;AA0BD,GA3BD;;AA6BA,MAAID,UAAJ,EAAgB;AACd,WAAO,oBAAC,QAAD;AAAU,MAAA,EAAE,EAAC,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACD;;AACD,SACE;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAsCE;AAAO,IAAA,IAAI,EAAC,UAAZ;AAAuB,IAAA,SAAS,EAAC,gBAAjC;AAAkD,IAAA,IAAI,EAAC,UAAvD;AAAkE,IAAA,WAAW,EAAC,eAA9E;AAA8F,IAAA,QAAQ,EAAGmB,CAAD,IAAOd,WAAW,CAACc,CAAC,CAACC,MAAF,CAASC,KAAV,CAA1H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAtCF,EAuCE;AAAO,IAAA,IAAI,EAAC,UAAZ;AAAuB,IAAA,SAAS,EAAC,gBAAjC;AAAkD,IAAA,IAAI,EAAC,UAAvD;AAAkE,IAAA,WAAW,EAAC,cAA9E;AAA6F,IAAA,QAAQ,EAAGF,CAAD,IAAOZ,WAAW,CAACY,CAAC,CAACC,MAAF,CAASC,KAAV,CAAzH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAvCF,CADF;AA2CD,CAlFD,C,CAmFA;AACA;AACA;AACA;AAEA;;;AAEA,eAAexB,KAAf","sourcesContent":["import React, { useState } from 'react';\nimport { Redirect } from 'react-router';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport { useAuth } from './Auth';\nimport './Login.css';\n\nconst Login = ({ dispatch }, props) => {\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [isError, setIsError] = useState(false);\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const { setAuthTokens } = useAuth();\n\n  const postLogin = () => {\n    axios\n      .post(`${process.env.REACT_APP_AXIOS_URL}/api/auth/login`, {\n        email,\n        password\n      })\n      .then(res => {\n        setAuthTokens(res.data.token);\n        setIsLoggedIn(true);\n    //     dispatch({\n    //       type: 'GET_LICENCE',\n    //       payload: res.data.user[0].licence_nbr\n    //     });\n    //     dispatch({\n    //       type: 'GET_IS_ADMIN',\n    //       payload: res.data.user[0].is_admin\n    //     });\n    //     dispatch({\n    //       type: 'GET_IS_SUPER',\n    //       payload: res.data.user[0].is_super\n    //     });\n\n    //     setIsError(true);\n    //   })\n    //   .catch(e => {\n    //     setIsError(true);\n      });\n  };\n\n  if (isLoggedIn) {\n    return <Redirect to=\"/Home\" />;\n  }\n  return (\n    <div className=\"Login_container\">\n      {/* <div className=\"loginForm-logo\">FC</div>\n\n      <div className=\"login-spread\">\n        <div className=\"loginForm-form\">\n          <input\n            name=\"email\"\n            className=\"loginForm-input\"\n            type=\"email\"\n            placeholder=\"Email\"\n            onChange={e => {\n              setEmail(e.target.value);\n            }}\n          />\n          <br />\n          <input\n            name=\"password\"\n            className=\"loginForm-input\"\n            type=\"password\"\n            placeholder=\"Mot de passe\"\n            onChange={e => {\n              setPassword(e.target.value);\n            }}\n          />\n          <br />\n          <button className=\"loginForm-btn\" text=\"Connexion\" onClick={() => postLogin()} />\n        </div>\n        <div>\n        </div>\n        <div className=\"subscribe-shape\">\n          <button\n            className=\"firstCo-btn\"\n            type=\"button\"\n            rootLink=\"/Subscribe\"\n            text=\"S'inscrire\"\n          />\n        </div>\n      </div> */}\n      <input name=\"username\" className=\"Login_username\" type=\"username\" placeholder=\"Nom de compte\" onChange={(e) => setUsername(e.target.value)}/>\n      <input name=\"password\" className=\"Login_password\" type=\"password\" placeholder=\"Mot de passe\" onChange={(e) => setPassword(e.target.value)}/>\n    </div>\n  );\n};\n// }\n// const mapStateToProps = store => {\n//   return { url: store.todos.url };\n// };\n\n// export default connect(mapStateToProps, null)(Login);\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}