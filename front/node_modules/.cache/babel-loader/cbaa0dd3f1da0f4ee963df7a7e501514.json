{"ast":null,"code":"import _slicedToArray from \"/home/fuencode/Documents/WildCodeSchool/checkpoint/Wild_Circus_2.0/front/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/fuencode/Documents/WildCodeSchool/checkpoint/Wild_Circus_2.0/front/src/components/adminPanel/AddPlace.jsx\";\nimport React, { useEffect, useState } from 'react';\nimport { storage } from '../../firebase/Config';\nimport { AuthContext } from '../auth/Auth';\nimport './AddPlace.css';\nimport BgGlitch from '../BgGlitch';\nimport Axios from 'axios';\n\nconst AddPlace = () => {\n  const dataUser = React.useContext(AuthContext);\n\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        isSubmit = _useState2[0],\n        setIsSubmit = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        place = _useState4[0],\n        setPlace = _useState4[1];\n\n  const _useState5 = useState(),\n        _useState6 = _slicedToArray(_useState5, 2),\n        newPlace = _useState6[0],\n        setNewPlace = _useState6[1];\n\n  const _useState7 = useState(),\n        _useState8 = _slicedToArray(_useState7, 2),\n        newName = _useState8[0],\n        setNewName = _useState8[1];\n\n  const _useState9 = useState({\n    name: null,\n    url: null\n  }),\n        _useState10 = _slicedToArray(_useState9, 2),\n        avatar = _useState10[0],\n        setAvatar = _useState10[1];\n\n  const submitPlace = () => {\n    Axios.put(`http://localhost:5000/api/user/update/${dataUser && dataUser.userInfo && dataUser.userInfo.id}`, {\n      place: newPlace,\n      name: newName\n    });\n  };\n\n  const submitAvatar = () => {\n    const uploadTask = storage.ref(`images/${avatar.name}`).put(avatar);\n    uploadTask.on('state_changed', snapshop => {// progress function\n    }, error => {\n      console.log('error', error);\n    }, () => {\n      // complete function ...\n      storage.ref('images').child(avatar.name).getDownloadURL().then(url => {\n        setAvatar({\n          url: url\n        });\n        Axios.post(`http://localhost:5000/api/exploit/`, {\n          image: url\n        }).then(setIsSubmit(true));\n      });\n    });\n  };\n\n  useEffect(() => {\n    Axios.get('http://localhost:5000/api/exploit').then(res => res.data).then(data => setPlace(data));\n  }, []);\n\n  const whatMustBeSend = () => {\n    avatar.name && avatar.url === null ? submitPlace() : submitAvatar();\n    submitPlace();\n  };\n\n  return React.createElement(\"div\", {\n    className: \"AddPlace_container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"Login_BgGlitch\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, React.createElement(BgGlitch, {\n    title: \"MADE BY FUENCORE\",\n    glitch: \"WILD_CIRCUS\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"AddPlace_box\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(\"ul\", {\n    className: \"AddPlace_ul\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, place.map(x => React.createElement(\"li\", {\n    className: \"AddPlace_li\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    id: \"AddPlace_button\",\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, \"Remove\"), React.createElement(\"img\", {\n    className: \"AddPlace_img\",\n    src: x.image,\n    key: x.id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"AddPlace_info_container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"AddPlace_name\",\n    key: x.id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, x.name), React.createElement(\"p\", {\n    className: \"AddPlace_place\",\n    key: x.id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, x.place))))), React.createElement(\"div\", {\n    className: \"AddPlace_box2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(\"li\", {\n    className: \"AddPlace_li\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    id: \"AddPlace_button_image\",\n    class: \"upload-btn-wrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    class: \"btn\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, \" IMAGE\"), React.createElement(\"input\", {\n    type: \"file\",\n    name: \"name\",\n    accept: \"image/jpeg, image/png\",\n    onChange: e => setAvatar(e.target.files[0]),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  })), React.createElement(\"img\", {\n    className: \"AddPlace_img\",\n    src: avatar.url,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"AddPlace_info_container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    className: \"AddPlace_name_1\",\n    placeholder: \"Entrer un nom\",\n    onChange: e => setNewName(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"text\",\n    className: \"AddPlace_place_1\",\n    placeholder: \"Entrer un lieu\",\n    onChange: e => setNewPlace(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  })))), React.createElement(\"button\", {\n    className: \"AddPlace_submit_btn\",\n    type: \"submit\",\n    onClick: () => whatMustBeSend(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, \"Enregistrer les modifications\")));\n};\n\nexport default AddPlace;","map":{"version":3,"sources":["/home/fuencode/Documents/WildCodeSchool/checkpoint/Wild_Circus_2.0/front/src/components/adminPanel/AddPlace.jsx"],"names":["React","useEffect","useState","storage","AuthContext","BgGlitch","Axios","AddPlace","dataUser","useContext","isSubmit","setIsSubmit","place","setPlace","newPlace","setNewPlace","newName","setNewName","name","url","avatar","setAvatar","submitPlace","put","userInfo","id","submitAvatar","uploadTask","ref","on","snapshop","error","console","log","child","getDownloadURL","then","post","image","get","res","data","whatMustBeSend","map","x","e","target","files","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { storage } from '../../firebase/Config';\nimport { AuthContext } from '../auth/Auth';\nimport './AddPlace.css';\nimport BgGlitch from '../BgGlitch';\nimport Axios from 'axios';\n\nconst AddPlace = () => {\n\tconst dataUser = React.useContext(AuthContext);\n    const [ isSubmit, setIsSubmit ] = useState(false);\n    const [ place, setPlace ] = useState([]);\n    const [ newPlace, setNewPlace ] = useState()\n    const [ newName, setNewName ] = useState()\n\tconst [ avatar, setAvatar ] = useState({\n\t\tname: null,\n\t\turl: null\n    });\n    \n    const submitPlace = () => {\n\t\tAxios.put(`http://localhost:5000/api/user/update/${dataUser && dataUser.userInfo && dataUser.userInfo.id}`, {\n            place: newPlace,\n            name: newName\n\t\t});\n\t};\n\n\tconst submitAvatar = () => {\n\t\tconst uploadTask = storage.ref(`images/${avatar.name}`).put(avatar);\n\t\tuploadTask.on(\n\t\t\t'state_changed',\n\t\t\t(snapshop) => {\n\t\t\t\t// progress function\n\t\t\t},\n\t\t\t(error) => {\n\t\t\t\tconsole.log('error', error);\n\t\t\t},\n\t\t\t() => {\n\t\t\t\t// complete function ...\n\t\t\t\tstorage.ref('images').child(avatar.name).getDownloadURL().then((url) => {\n\t\t\t\t\tsetAvatar({ url: url });\n\t\t\t\t\tAxios.post(`http://localhost:5000/api/exploit/`, {\n\t\t\t\t\t\timage: url\n\t\t\t\t\t}).then(setIsSubmit(true));\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t};\n\n\tuseEffect(() => {\n\t\tAxios.get('http://localhost:5000/api/exploit').then((res) => res.data).then((data) => setPlace(data));\n\t}, []);\n\n\n\tconst whatMustBeSend = () => {\n\t\tavatar.name && avatar.url === null ? submitPlace() : submitAvatar();\n\t\tsubmitPlace();\n\t};\n\n\treturn (\n\t\t<div className=\"AddPlace_container\">\n\t\t\t<div className=\"Login_BgGlitch\">\n\t\t\t\t<BgGlitch title=\"MADE BY FUENCORE\" glitch=\"WILD_CIRCUS\" />\n\t\t\t</div>\n\t\t\t<div className=\"AddPlace_box\">\n\t\t\t\t<ul className=\"AddPlace_ul\">\n\t\t\t\t\t{place.map((x) => (\n\t\t\t\t\t\t<li className=\"AddPlace_li\">\n\t\t\t\t\t\t\t<button id=\"AddPlace_button\" type=\"submit\">\n\t\t\t\t\t\t\t\tRemove\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<img className=\"AddPlace_img\" src={x.image} key={x.id} />\n\t\t\t\t\t\t\t<div className=\"AddPlace_info_container\">\n\t\t\t\t\t\t\t\t<p className=\"AddPlace_name\" key={x.id}>\n\t\t\t\t\t\t\t\t\t{x.name}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p className=\"AddPlace_place\" key={x.id}>\n\t\t\t\t\t\t\t\t\t{x.place}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t\t<div className=\"AddPlace_box2\">\n\t\t\t\t\t<li className=\"AddPlace_li\">\n\t\t\t\t\t\t<div id=\"AddPlace_button_image\" class=\"upload-btn-wrapper\">\n\t\t\t\t\t\t\t<button class=\"btn\"> IMAGE</button>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\t\t\taccept=\"image/jpeg, image/png\"\n\t\t\t\t\t\t\t\tonChange={(e) => setAvatar(e.target.files[0])}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<img className=\"AddPlace_img\" src={avatar.url} />\n\t\t\t\t\t\t<div className=\"AddPlace_info_container\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclassName=\"AddPlace_name_1\"\n\t\t\t\t\t\t\t\tplaceholder=\"Entrer un nom\"\n\t\t\t\t\t\t\t\tonChange={(e) => setNewName(e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclassName=\"AddPlace_place_1\"\n\t\t\t\t\t\t\t\tplaceholder=\"Entrer un lieu\"\n\t\t\t\t\t\t\t\tonChange={(e) => setNewPlace(e.target.value )}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t\t</div>\n\t\t\t\t<button className=\"AddPlace_submit_btn\" type=\"submit\" onClick={() => whatMustBeSend()}>Enregistrer les modifications</button>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default AddPlace;\n"]},"metadata":{},"sourceType":"module"}