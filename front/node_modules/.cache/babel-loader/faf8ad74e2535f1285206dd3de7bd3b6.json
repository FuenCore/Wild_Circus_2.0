{"ast":null,"code":"import _slicedToArray from \"/home/fuencode/Documents/WildCodeSchool/checkpoint/Wild_Circus_2.0/front/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/fuencode/Documents/WildCodeSchool/checkpoint/Wild_Circus_2.0/front/src/components/auth/Login.jsx\";\nimport React, { useState } from 'react';\nimport { DefaultButton } from '../shapes/Shapes';\nimport { Redirect } from 'react-router';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport { useAuth } from './Auth';\nimport './Login.css';\n\nconst Login = ({\n  dispatch\n}, props) => {\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        isLoggedIn = _useState2[0],\n        setIsLoggedIn = _useState2[1];\n\n  const _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        isError = _useState4[0],\n        setIsError = _useState4[1];\n\n  const _useState5 = useState(''),\n        _useState6 = _slicedToArray(_useState5, 2),\n        email = _useState6[0],\n        setEmail = _useState6[1];\n\n  const _useState7 = useState(''),\n        _useState8 = _slicedToArray(_useState7, 2),\n        password = _useState8[0],\n        setPassword = _useState8[1];\n\n  const _useAuth = useAuth(),\n        setAuthTokens = _useAuth.setAuthTokens;\n\n  const postLogin = () => {\n    axios.post(`${process.env.REACT_APP_AXIOS_URL}/api/auth/login`, {\n      email,\n      password\n    }).then(res => {\n      setAuthTokens(res.data.token);\n      setIsLoggedIn(true);\n      dispatch({\n        type: 'GET_LICENCE',\n        payload: res.data.user[0].licence_nbr\n      });\n      dispatch({\n        type: 'GET_IS_ADMIN',\n        payload: res.data.user[0].is_admin\n      });\n      dispatch({\n        type: 'GET_IS_SUPER',\n        payload: res.data.user[0].is_super\n      });\n      setIsError(true);\n    }).catch(e => {\n      setIsError(true);\n    });\n  };\n\n  if (isLoggedIn) {\n    return React.createElement(Redirect, {\n      to: \"/Home\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    });\n  }\n\n  return React.createElement(\"div\", {\n    className: \"loginForm-shape\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"loginForm-logo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, \"FC\"), React.createElement(\"div\", {\n    className: \"login-spread\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"loginForm-form\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    name: \"email\",\n    className: \"loginForm-input\",\n    type: \"email\",\n    placeholder: \"Email\",\n    onChange: e => {\n      setEmail(e.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    name: \"password\",\n    className: \"loginForm-input\",\n    type: \"password\",\n    placeholder: \"Mot de passe\",\n    onChange: e => {\n      setPassword(e.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }), React.createElement(DefaultButton, {\n    addClass: \"loginForm-btn\",\n    text: \"Connexion\",\n    addOnClick: () => postLogin(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"subscribe-shape\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"subscribe-link\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, \"Premi\\xE8re connexion ?\"), React.createElement(\"button\", {\n    className: \"firstCo-btn\",\n    type: \"button\",\n    rootLink: \"/Subscribe\",\n    text: \"S'inscrire\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }))));\n}; // }\n\n\nconst mapStateToProps = store => {\n  return {\n    url: store.todos.url\n  };\n};\n\nexport default connect(mapStateToProps, null)(Login);","map":{"version":3,"sources":["/home/fuencode/Documents/WildCodeSchool/checkpoint/Wild_Circus_2.0/front/src/components/auth/Login.jsx"],"names":["React","useState","DefaultButton","Redirect","connect","axios","useAuth","Login","dispatch","props","isLoggedIn","setIsLoggedIn","isError","setIsError","email","setEmail","password","setPassword","setAuthTokens","postLogin","post","process","env","REACT_APP_AXIOS_URL","then","res","data","token","type","payload","user","licence_nbr","is_admin","is_super","catch","e","target","value","mapStateToProps","store","url","todos"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { DefaultButton } from '../shapes/Shapes';\nimport { Redirect } from 'react-router';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport { useAuth } from './Auth';\nimport './Login.css';\n\nconst Login = ({ dispatch }, props) => {\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [isError, setIsError] = useState(false);\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const { setAuthTokens } = useAuth();\n\n  const postLogin = () => {\n    axios\n      .post(`${process.env.REACT_APP_AXIOS_URL}/api/auth/login`, {\n        email,\n        password\n      })\n      .then(res => {\n        setAuthTokens(res.data.token);\n        setIsLoggedIn(true);\n        dispatch({\n          type: 'GET_LICENCE',\n          payload: res.data.user[0].licence_nbr\n        });\n        dispatch({\n          type: 'GET_IS_ADMIN',\n          payload: res.data.user[0].is_admin\n        });\n        dispatch({\n          type: 'GET_IS_SUPER',\n          payload: res.data.user[0].is_super\n        });\n\n        setIsError(true);\n      })\n      .catch(e => {\n        setIsError(true);\n      });\n  };\n\n  if (isLoggedIn) {\n    return <Redirect to=\"/Home\" />;\n  }\n  return (\n    <div className=\"loginForm-shape\">\n      <div className=\"loginForm-logo\">FC</div>\n\n      <div className=\"login-spread\">\n        <div className=\"loginForm-form\">\n          <input\n            name=\"email\"\n            className=\"loginForm-input\"\n            type=\"email\"\n            placeholder=\"Email\"\n            onChange={e => {\n              setEmail(e.target.value);\n            }}\n          />\n          <br />\n          <input\n            name=\"password\"\n            className=\"loginForm-input\"\n            type=\"password\"\n            placeholder=\"Mot de passe\"\n            onChange={e => {\n              setPassword(e.target.value);\n            }}\n          />\n          <br />\n          <DefaultButton addClass=\"loginForm-btn\" text=\"Connexion\" addOnClick={() => postLogin()} />\n        </div>\n        <div>\n        </div>\n        <div className=\"subscribe-shape\">\n          <p className=\"subscribe-link\">Première connexion ?</p>\n          <button\n            className=\"firstCo-btn\"\n            type=\"button\"\n            rootLink=\"/Subscribe\"\n            text=\"S'inscrire\"\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n// }\nconst mapStateToProps = store => {\n  return { url: store.todos.url };\n};\n\nexport default connect(mapStateToProps, null)(Login);\n"]},"metadata":{},"sourceType":"module"}